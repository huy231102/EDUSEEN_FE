@startuml View User Detail Sequence Diagram - Simplified
!theme plain
title Sequence Diagram - View User Detail Feature (Simplified)

participant "Admin" as A
participant "AdminDashboard" as AD
participant "AuthContext" as AC
participant "UserController" as UC
participant "UserService" as US
participant "UserRepository" as UR
participant "Database" as DB

== View User Detail Flow ==

A -> AD: 1: select user from list
A -> AD: 2: click view detail button
activate AD

AD -> AC: 3: check admin authentication
activate AC
AC -> AC: 4: verify admin role
AC --> AD: 5: admin user data
deactivate AC

alt [Admin authenticated]
    AD -> AD: 6: open user detail modal
    note right: Set selectedUser and openDetail
    
    AD -> UC: 7: getUserById request
    activate UC
    
    UC -> UC: 8: verify admin authorization
    note right: Check [Authorize(Roles = "Admin")]
    
    UC -> US: 9: getUserByIdAsync(userId)
    activate US
    
    US -> UR: 10: getUserByIdWithRoleAsync(userId)
    activate UR
    UR -> DB: query user with role details
    activate DB
    DB --> UR: user data with role
    deactivate DB
    UR --> US: 11: user detail data
    deactivate UR
    
    US -> US: 12: format user detail data
    note right: Include: personal info, role, activity, etc.
    
    US --> UC: 13: user detail response
    deactivate US
    
    UC --> AD: 14: user detail data
    deactivate UC
    
    AD -> AD: 15: display user detail information
    note right: Show: personal info, role, activity logs, enrollment history
    
    AD -> A: 16: render user detail modal
    deactivate AD
    
else [Not admin]
    AD -> A: redirect to unauthorized page
    deactivate AD
end

@enduml 