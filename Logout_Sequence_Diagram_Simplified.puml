@startuml Logout Sequence Diagram - Simplified
!theme plain
title Sequence Diagram - Logout Feature (Simplified)

participant "Client" as C
participant "LogoutPage" as LP
participant "LogoutController" as LC
participant "AuthContext" as AC
participant "TokenService" as TS
participant "UserRepository" as UR

== Logout Flow ==

C -> LP: 1: click logout button
activate LP

LP -> AC: 2: logout()
activate AC

AC -> AC: 3: clear token from storage
AC -> AC: 4: clear user data from storage
AC --> LP: 5: logout completed
deactivate AC

LP -> LC: 6: submit logout request
activate LC

LC -> LC: 7: extract user ID from token
note right: Get userId from JWT token

LC -> UR: 8: getUserById(userId)
activate UR
UR --> LC: 9: user data
deactivate UR

alt [User exists]
    LC -> TS: 10: deleteTokenCookie()
    activate TS
    TS -> TS: 11: clear HTTP-only cookie
    TS --> LC: 12: cookie deleted
    deactivate TS
    
    LC --> LP: 13: logout response (success)
    deactivate LC
    
    LP -> C: 14: redirect to login page
    deactivate LP
    
else [User not found]
    LC --> LP: logout response (success)
    deactivate LC
    
    LP -> C: redirect to login page
    deactivate LP
end

@enduml 